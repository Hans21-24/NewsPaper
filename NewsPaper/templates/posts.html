<!--  наследуемся от шаблона default.html, который мы создавали для flatpages -->
{% extends 'flatpages/default.html' %}

<!-- Подключаем свой созданный фильтр от censor_filter.py -->
{% load censor_filter %}

<!-- Подключаем свой созданный тег от custom_tags -->
{% load custom_tags %}

<!-- Название у нас будет Posts -->
{% block title %}
Posts
{% endblock title %}

<!-- В контенте на странице мы выводим все товары -->
{% block content %}
    <h1>Всего публикаций</h1>
    <h1>{{ posts|length }}</h1>
   <!-- Вот так выглядело использование переменной и фильтра -->
   <!-- <h3>{{ time_now|date:'M d Y' }}</h3> -->
   <!-- А вот так мы используем наш тег-->
   <h3>{% current_time '%b %d %Y' %}</h3>
    <hr>
    <!-- Выводим товары, только если они есть с помощью тега if -->
    {% if posts %}
        <table>
            <tr>
                <td>Заголовок</td>
                <td>Дата публикации</td>
                <td>Текст</td>
                <td>Категория</td>
                <td>Рейтинг</td>
                <!-- <td>Количество</td> -->
            </tr>
            <!-- Для каждого товара будете генерироваться новая строчка,
            т.е. новый HTML код, который указан в теле цикла.
            При этом сам цикл работает точно так же, как и в Python.
            product — переменная цикла, т.е. наш товар полученный из списка -->
            {% for post in posts %}
            <tr>
                <!-- Не забываем, что переменные в шаблоне ничем не отличаются
                от переменных в Python. Здесь также можно получать доступ к
                полям объекта модели. Например, здесь мы выводим имя,
                в следующем столбце описание, и т.д.  -->
                <td>{{ post.heading|censor }}</td>
                <!-- Добавим специальный фильтр truncatechars,
                чтобы ограничить количество символов до 15.
                Все остальные символы превратятся в многоточие. -->
                <td>{{ post.date_created|date:'d M Y'}}</td>
                <td>{{ post.text|truncatechars:20 }}</td>
                <td>{{ post.category_type }}</td>
                <td>{{ post.rating }}</td>
                <!-- <td>{{ product.quantity }}</td> -->
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <!-- Если товаров нет, говорим, что товаров нет ;) -->
        <h2>Товаров нет!</h2>
    {% endif %}
{% endblock content %}
